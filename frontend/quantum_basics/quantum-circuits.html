<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quantum Circuits - Quantum Cryptography Tutorial</title>
    <meta name="description" content="Build and simulate quantum circuits with interactive circuit builder, famous quantum algorithms, and measurement analysis.">
    <link rel="stylesheet" href="../css/styles.css">
    <link rel="stylesheet" href="../css/quantum-visualizations.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;600&display=swap" rel="stylesheet">
    <style>
        .circuit-card {
            background: rgba(255, 255, 255, 0.08);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            padding: 2rem;
            margin: 2rem 0;
            color: #ffffff;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
            transition: all 0.3s ease;
        }
        
        .circuit-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            border-color: rgba(255, 255, 255, 0.2);
        }
        
        .circuit-builder {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 2rem;
            margin: 2rem 0;
        }
        
        .circuit-controls {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 2rem;
            margin: 2rem 0;
        }
        
        .control-group {
            margin-bottom: 1.5rem;
        }
        
        .control-group label {
            display: block;
            margin-bottom: 0.8rem;
            font-weight: 600;
            color: #e0e0e0;
            font-size: 0.9rem;
        }
        
        .control-group input, .control-group select {
            width: 100%;
            padding: 1rem;
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 8px;
            background: rgba(0, 0, 0, 0.3);
            color: #ffffff;
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.9rem;
            transition: all 0.3s ease;
        }
        
        .control-group input:focus, .control-group select:focus {
            outline: none;
            border-color: rgba(102, 126, 234, 0.8);
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.2);
        }
        
        .circuit-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 1rem;
            margin: 2rem 0;
        }
        
        .gate-button {
            background: rgba(255, 255, 255, 0.1);
            border: 2px solid rgba(255, 255, 255, 0.2);
            border-radius: 12px;
            padding: 1rem 0.8rem;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
            font-weight: 600;
            font-size: 0.9rem;
            color: white;
        }
        
        .gate-button:hover {
            background: rgba(102, 126, 234, 0.3);
            border-color: rgba(102, 126, 234, 0.5);
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(102, 126, 234, 0.2);
        }
        
        .gate-button:disabled {
            opacity: 0.4;
            cursor: not-allowed;
            transform: none;
            background: rgba(255, 255, 255, 0.05);
        }
        
        .circuit-display {
            background: rgba(0, 0, 0, 0.4);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            padding: 2rem;
            margin: 2rem 0;
            min-height: 150px;
            font-family: 'JetBrains Mono', monospace;
            line-height: 1.6;
        }
        
        .circuit-visualization {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            padding: 1.5rem;
            margin: 1.5rem 0;
            text-align: center;
            font-family: 'JetBrains Mono', monospace;
            font-size: 1.1rem;
            line-height: 1.8;
        }
        
        .control-panel {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 1rem;
            margin: 2rem 0;
        }
        
        .btn-simulate {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 1rem 1.5rem;
            border-radius: 12px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
            font-size: 0.9rem;
        }
        
        .btn-simulate:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(102, 126, 234, 0.4);
        }
        
        .btn-simulate:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }
        
        .results-display {
            background: rgba(0, 0, 0, 0.4);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            padding: 2rem;
            margin: 2rem 0;
            font-family: 'JetBrains Mono', monospace;
            line-height: 1.6;
        }
        
        .measurement-item {
            display: flex;
            align-items: center;
            margin: 1rem 0;
            gap: 1rem;
        }
        
        .measurement-item span {
            min-width: 120px;
            font-weight: 600;
        }
        
        .probability-bar {
            flex: 1;
            height: 24px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            overflow: hidden;
        }
        
        .probability-fill {
            height: 100%;
            background: linear-gradient(90deg, #667eea, #764ba2);
            border-radius: 12px;
            transition: width 0.8s ease;
        }
        
        .algorithm-card {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            padding: 1.5rem;
            margin: 1.5rem 0;
            position: relative;
        }
        
        .step-indicator {
            position: absolute;
            top: -15px;
            left: -15px;
            width: 35px;
            height: 35px;
            background: linear-gradient(135deg, #667eea, #764ba2);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 1rem;
            color: white;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
        }
        
        .circuit-status {
            display: inline-block;
            padding: 0.5rem 1rem;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
            margin: 0.5rem;
        }
        
        .status-ready { 
            background: linear-gradient(135deg, #4CAF50, #8BC34A);
            color: white;
        }
        .status-building { 
            background: linear-gradient(135deg, #FF9800, #FF5722);
            color: white;
        }
        .status-error { 
            background: linear-gradient(135deg, #F44336, #E91E63);
            color: white;
        }
        
        .gate-info {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            padding: 0.8rem 1rem;
            margin: 0.5rem;
            display: inline-block;
            font-size: 0.8rem;
            font-family: 'JetBrains Mono', monospace;
        }

        .results-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin: 1.5rem 0;
            padding: 1.5rem;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 12px;
        }

        .counts-display {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 1rem;
            margin: 1rem 0;
        }

        .count-item {
            background: rgba(255, 255, 255, 0.1);
            padding: 1rem;
            border-radius: 8px;
            text-align: center;
            font-family: 'JetBrains Mono', monospace;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .insights-list {
            background: rgba(255, 255, 255, 0.05);
            padding: 1.5rem;
            border-radius: 12px;
            margin: 1rem 0;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .insights-list li {
            margin: 1rem 0;
            padding-left: 2rem;
            position: relative;
            line-height: 1.6;
        }

        .insights-list li::before {
            content: 'üí°';
            position: absolute;
            left: 0;
        }

        .statevector-display {
            font-family: 'JetBrains Mono', monospace;
            background: rgba(0, 0, 0, 0.3);
            padding: 1.5rem;
            border-radius: 12px;
            margin: 1rem 0;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .amplitude-item {
            margin: 1rem 0;
            padding: 1rem;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 8px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .magnitude {
            color: #b0b0b0;
            font-size: 0.9em;
        }

        .quantum-metrics {
            background: rgba(255, 255, 255, 0.05);
            padding: 1.5rem;
            border-radius: 12px;
            margin: 1rem 0;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .visualization-container {
            margin: 2rem 0;
            padding: 1.5rem;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .visualization-container h6 {
            margin: 0 0 1.5rem 0;
            color: #ffffff;
            font-weight: 600;
            font-size: 1.1rem;
        }

        .count-label {
            font-size: 0.9em;
            color: #b0b0b0;
            min-width: 80px;
        }

        .notification {
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3);
            backdrop-filter: blur(10px);
        }

        .loading-indicator {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            border-top-color: #fff;
            animation: spin 1s ease-in-out infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        .error-message {
            background: rgba(244, 67, 54, 0.1);
            border: 2px solid rgba(244, 67, 54, 0.3);
            border-radius: 12px;
            padding: 1.5rem;
            margin: 1rem 0;
            color: #ffcdd2;
            backdrop-filter: blur(10px);
        }

        .success-message {
            background: rgba(76, 175, 80, 0.1);
            border: 2px solid rgba(76, 175, 80, 0.3);
            border-radius: 12px;
            padding: 1.5rem;
            margin: 1rem 0;
            color: #c8e6c9;
            backdrop-filter: blur(10px);
        }

        .debug-info {
            background: rgba(33, 150, 243, 0.1);
            border: 2px solid rgba(33, 150, 243, 0.3);
            border-radius: 12px;
            padding: 1.5rem;
            margin: 1rem 0;
            color: #bbdefb;
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.9em;
            backdrop-filter: blur(10px);
        }

        .section-title {
            font-size: 2.5rem;
            font-weight: 800;
            margin-bottom: 1rem;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .section-description {
            font-size: 1.2rem;
            color: #b0b0b0;
            margin-bottom: 3rem;
            line-height: 1.6;
        }

        .circuit-card h3 {
            font-size: 1.5rem;
            font-weight: 700;
            margin-bottom: 1rem;
            color: #ffffff;
        }

        .circuit-card p {
            color: #d0d0d0;
            margin-bottom: 1.5rem;
            line-height: 1.6;
        }

        .btn-link {
            display: inline-block;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            text-decoration: none;
            padding: 1rem 2rem;
            border-radius: 12px;
            font-weight: 600;
            transition: all 0.3s ease;
        }
        
        .btn-link:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(102, 126, 234, 0.4);
            color: white;
            text-decoration: none;
        }

        .measurement-results {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            padding: 1.5rem;
            margin: 1rem 0;
        }

        .measurement-results h4 {
            color: #667eea;
            margin-bottom: 1rem;
            font-size: 1.1rem;
        }
    </style>
</head>
<body>
    <header class="main-header">
        <nav class="navbar">
            <div class="nav-container">
                <h1 class="logo"><a href="../index.html">QuantumCrypto Tutorial</a></h1>
                <ul class="nav-menu">
                    <li><a href="../index.html">Home</a></li>
                    <li><a href="quantum-intro.html">Quantum Basics</a></li>
                    <li><a href="qubits-tutorial.html">Qubits</a></li>
                    <li><a href="quantum-gates.html">Gates</a></li>
                    <li><a href="quantum-circuits.html" class="active">Circuits</a></li>
                </ul>
            </div>
        </nav>
    </header>

    <main class="lesson-content">
        <div class="container">
            <div class="lesson-header">
                <h1>Interactive Quantum Circuit Builder</h1>
                <p class="lesson-subtitle">
                    Build, simulate, and analyze quantum circuits with our advanced interactive tool. 
                    Learn about famous quantum algorithms, visualize quantum states, and understand measurement results.
                </p>
            </div>

            <div class="lesson-navigation">
                <div class="nav-item">
                    <a href="quantum-intro.html">
                        <span class="nav-number">01</span>
                        <span class="nav-title">Introduction</span>
                    </a>
                </div>
                <div class="nav-item">
                    <a href="qubits-tutorial.html">
                        <span class="nav-number">02</span>
                        <span class="nav-title">Qubits</span>
                    </a>
                </div>
                <div class="nav-item">
                    <a href="quantum-gates.html">
                        <span class="nav-number">03</span>
                        <span class="nav-title">Gates</span>
                    </a>
                </div>
                <div class="nav-item current">
                    <span class="nav-number">04</span>
                    <span class="nav-title">Circuits</span>
                </div>
            </div>

            <article class="lesson-article">
                <section class="content-section">
                    <h2 class="section-title">Advanced Circuit Builder</h2>
                    <p class="section-description">
                        Create quantum circuits by adding gates and simulate their behavior with enhanced visualizations. 
                        Our simulator provides comprehensive analysis including Bloch sphere representations and educational insights.
                    </p>
                    
                    <div class="circuit-card">
                        <h3>Circuit Controls</h3>
                        <div class="circuit-controls">
                            <div class="control-group">
                                <label for="circuit-qubits">Number of Qubits:</label>
                                <select id="circuit-qubits">
                                    <option value="1">1 Qubit</option>
                                    <option value="2" selected>2 Qubits</option>
                                    <option value="3">3 Qubits</option>
                                    <option value="4">4 Qubits</option>
                                    <option value="5">5 Qubits</option>
                                </select>
                            </div>
                            <div class="control-group">
                                <label for="circuit-shots">Number of Shots:</label>
                                <input type="number" id="circuit-shots" value="1024" min="100" max="10000">
                            </div>
                            <div class="control-group">
                                <label for="include-visualizations">Include Advanced Visualizations:</label>
                                <select id="include-visualizations">
                                    <option value="true" selected>Yes (Recommended)</option>
                                    <option value="false">No (Faster)</option>
                                </select>
                            </div>
                            <div class="control-group">
                                <label for="debug-mode">Debug Mode:</label>
                                <select id="debug-mode">
                                    <option value="false" selected>Off</option>
                                    <option value="true">On (Show Network Details)</option>
                                </select>
                            </div>
                            <button class="btn-simulate" onclick="initializeCircuit()">Initialize Circuit</button>
                        </div>
                        
                        <div class="circuit-builder">
                            <h4>Available Quantum Gates</h4>
                            <div class="circuit-grid">
                                <div class="gate-button" onclick="addGate('X')" id="gate-X" title="Pauli-X (NOT) Gate">X Gate</div>
                                <div class="gate-button" onclick="addGate('Y')" id="gate-Y" title="Pauli-Y Gate">Y Gate</div>
                                <div class="gate-button" onclick="addGate('Z')" id="gate-Z" title="Pauli-Z Gate">Z Gate</div>
                                <div class="gate-button" onclick="addGate('H')" id="gate-H" title="Hadamard Gate">H Gate</div>
                                <div class="gate-button" onclick="addGate('S')" id="gate-S" title="S Phase Gate">S Gate</div>
                                <div class="gate-button" onclick="addGate('T')" id="gate-T" title="T Gate">T Gate</div>
                                <div class="gate-button" onclick="addGate('CNOT')" id="gate-CNOT" title="Controlled-NOT Gate">CNOT</div>
                                <div class="gate-button" onclick="addGate('CZ')" id="gate-CZ" title="Controlled-Z Gate">CZ</div>
                                <div class="gate-button" onclick="addGate('SWAP')" id="gate-SWAP" title="SWAP Gate">SWAP</div>
                                <div class="gate-button" onclick="addGate('RX')" id="gate-RX" title="X-Rotation Gate">RX(œÄ/2)</div>
                                <div class="gate-button" onclick="addGate('RY')" id="gate-RY" title="Y-Rotation Gate">RY(œÄ/2)</div>
                                <div class="gate-button" onclick="addGate('RZ')" id="gate-RZ" title="Z-Rotation Gate">RZ(œÄ/2)</div>
                            </div>
                            
                            <div class="circuit-display" id="circuit-display">
                                <p>Click "Initialize Circuit" to start building your quantum circuit...</p>
                            </div>
                            
                            <div class="control-panel">
                                <button class="btn-simulate" onclick="simulateCircuit()" id="simulate-btn" disabled>
                                    <span id="simulate-text">Simulate Circuit</span>
                                </button>
                                <button class="btn-simulate" onclick="clearCircuit()">Clear Circuit</button>
                                <button class="btn-simulate" onclick="loadPreset('bell')">Load Bell State</button>
                                <button class="btn-simulate" onclick="loadPreset('ghz')">Load GHZ State</button>
                                <button class="btn-simulate" onclick="loadPreset('superposition')">Load Superposition</button>
                                <button class="btn-simulate" onclick="testEndpoint()">Test API Endpoint</button>
                            </div>
                            
                            <div class="results-display" id="circuit-results">
                                <p>üî¨ Circuit simulation results will appear here...</p>
                            </div>
                        </div>
                    </div>
                </section>

                <section class="content-section">
                    <h2 class="section-title">Famous Quantum Circuits</h2>
                    <p class="section-description">
                        Learn about important quantum circuits and algorithms that demonstrate 
                        the power of quantum computing and form the foundation of quantum technologies.
                    </p>
                    
                    <div class="circuit-card">
                        <h3>üîó Bell State Circuit</h3>
                        <p>The Bell state is a maximally entangled two-qubit state that demonstrates quantum entanglement - a key resource for quantum computing and quantum cryptography.</p>
                        <div class="algorithm-card">
                            <div class="step-indicator">1</div>
                            <strong>Apply Hadamard gate to first qubit:</strong> H|0‚ü© = (|0‚ü© + |1‚ü©)/‚àö2 = |+‚ü©
                            <div class="circuit-visualization">
                                <p>H ‚îÄ‚îÄ‚îÄ‚îÄ</p>
                            </div>
                        </div>
                        <div class="algorithm-card">
                            <div class="step-indicator">2</div>
                            <strong>Apply CNOT gate with first qubit as control:</strong> Creates entanglement
                            <div class="circuit-visualization">
                                <p>H ‚îÄ‚îÄ‚îÄ‚îÄ‚óè‚îÄ‚îÄ‚îÄ‚îÄ</p>
                                <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;‚îÇ</p>
                                <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;‚äï</p>
                            </div>
                        </div>
                        <div class="algorithm-card">
                            <div class="step-indicator">3</div>
                            <strong>Result:</strong> |Œ¶+‚ü© = (|00‚ü© + |11‚ü©)/‚àö2 - Perfect correlation!
                            <div class="measurement-results" id="bell-results">
                                <p>Click "Load Bell State" to see the measurement results and visualizations...</p>
                            </div>
                        </div>
                    </div>

                    <div class="circuit-card">
                        <h3>üåê GHZ State Circuit</h3>
                        <p>The GHZ (Greenberger-Horne-Zeilinger) state is a three-qubit entangled state that demonstrates multipartite quantum entanglement.</p>
                        <div class="algorithm-card">
                            <div class="step-indicator">1</div>
                            <strong>Apply Hadamard gate to first qubit:</strong> Creates superposition
                        </div>
                        <div class="algorithm-card">
                            <div class="step-indicator">2</div>
                            <strong>Apply CNOT gates to create entanglement:</strong>
                            <div class="circuit-visualization">
                                <p>H ‚îÄ‚îÄ‚îÄ‚îÄ‚óè‚îÄ‚îÄ‚îÄ‚îÄ‚óè‚îÄ‚îÄ‚îÄ‚îÄ</p>
                                <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;‚îÇ&nbsp;&nbsp;&nbsp;&nbsp;‚îÇ</p>
                                <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;‚äï&nbsp;&nbsp;&nbsp;&nbsp;‚îÇ</p>
                                <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;‚äï</p>
                            </div>
                        </div>
                        <div class="algorithm-card">
                            <div class="step-indicator">3</div>
                            <strong>Result:</strong> |GHZ‚ü© = (|000‚ü© + |111‚ü©)/‚àö2 - Three-way entanglement!
                            <div class="measurement-results" id="ghz-results">
                                <p>Click "Load GHZ State" to see the measurement results and analysis...</p>
                            </div>
                        </div>
                    </div>

                    <div class="circuit-card">
                        <h3>üåä Quantum Fourier Transform</h3>
                        <p>The Quantum Fourier Transform is a key component in many quantum algorithms, including Shor's factoring algorithm.</p>
                        <div class="algorithm-card">
                            <div class="step-indicator">1</div>
                            <strong>Apply Hadamard gates to create superposition</strong>
                        </div>
                        <div class="algorithm-card">
                            <div class="step-indicator">2</div>
                            <strong>Apply controlled phase rotations for interference</strong>
                        </div>
                        <div class="algorithm-card">
                            <div class="step-indicator">3</div>
                            <strong>Apply SWAP gates to reverse qubit order</strong>
                        </div>
                        <div class="measurement-results" id="qft-results">
                            <p>QFT transforms computational basis states to Fourier basis states, enabling efficient period-finding algorithms.</p>
                        </div>
                    </div>
                </section>

                <section class="content-section">
                    <h2 class="section-title">üìä Measurement and Results Analysis</h2>
                    <p class="section-description">
                        Understanding quantum measurements and interpreting results is crucial for quantum computing. 
                        Our simulator provides comprehensive analysis and educational insights.
                    </p>
                    
                    <div class="circuit-card">
                        <h3>üìà Measurement Statistics</h3>
                        <p>Quantum measurements are probabilistic. Multiple measurements (shots) 
                        help us understand the probability distribution of outcomes and verify theoretical predictions.</p>
                        
                        <div class="measurement-results" id="measurement-stats">
                            <h4>üéØ Measurement Results Visualization</h4>
                            <div id="probability-bars">
                                <p>Run a circuit simulation to see detailed measurement statistics with probability bars...</p>
                            </div>
                        </div>
                    </div>

                    <div class="circuit-card">
                        <h3>üî¢ Quantum State Vector Analysis</h3>
                        <p>For small circuits, we can compute the exact quantum state vector and visualize it on the Bloch sphere for single qubits.</p>
                        
                        <div class="measurement-results" id="state-vector">
                            <h4>üåê Quantum State Information</h4>
                            <p>State vector information and Bloch sphere visualizations will appear here after simulation...</p>
                        </div>
                    </div>
                </section>
            </article>

            <div class="lesson-footer">
                <div class="progress-bar">
                    <div class="progress-fill" style="width: 100%"></div>
                </div>
                <div class="lesson-actions">
                    <a href="quantum-gates.html" class="btn btn-outline">‚Üê Back to Gates</a>
                    <a href="../bb84-protocol/bb84-tutorial.html" class="btn btn-primary">Next: BB84 Protocol ‚Üí</a>
                </div>
            </div>
        </div>
    </main>

    <script src="../js/main.js"></script>
    <script>
        // Enhanced Quantum Circuit Client with improved error handling
        class QuantumCircuitApp {
            constructor() {
                this.currentCircuit = [];
                this.circuitQubits = 2;
                this.circuitShots = 1024;
                this.circuitInitialized = false;
                this.simulationInProgress = false;
                this.includeVisualizations = true;
                this.debugMode = false;
                
                this.initializeEventListeners();
            }

            initializeEventListeners() {
                document.getElementById('circuit-qubits').addEventListener('change', (e) => {
                    this.circuitQubits = parseInt(e.target.value);
                    if (this.circuitInitialized) {
                        this.updateCircuitDisplay();
                    }
                });
                
                document.getElementById('circuit-shots').addEventListener('change', (e) => {
                    this.circuitShots = Math.min(10000, Math.max(100, parseInt(e.target.value)));
                    e.target.value = this.circuitShots;
                });

                document.getElementById('include-visualizations').addEventListener('change', (e) => {
                    this.includeVisualizations = e.target.value === 'true';
                });

                document.getElementById('debug-mode').addEventListener('change', (e) => {
                    this.debugMode = e.target.value === 'true';
                });
            }
            
            initializeCircuit() {
                this.circuitQubits = parseInt(document.getElementById('circuit-qubits').value);
                this.circuitShots = parseInt(document.getElementById('circuit-shots').value);
                this.includeVisualizations = document.getElementById('include-visualizations').value === 'true';
                this.debugMode = document.getElementById('debug-mode').value === 'true';
                this.currentCircuit = [];
                this.circuitInitialized = true;
                
                this.enableGateButtons();
                document.getElementById('simulate-btn').disabled = false;
                
                this.updateCircuitDisplay();
                this.showNotification(`üéØ Circuit initialized with ${this.circuitQubits} qubits!`, 'success');
                
                if (this.debugMode) {
                    this.showDebugInfo('Circuit initialized successfully');
                }
            }
            
            enableGateButtons() {
                document.querySelectorAll('.gate-button').forEach(btn => {
                    btn.style.opacity = '1';
                    btn.style.pointerEvents = 'auto';
                    btn.disabled = false;
                });
            }
            
            addGate(gateType) {
                if (!this.circuitInitialized) {
                    this.initializeCircuit();
                }
                
                // Enhanced gate validation
                if ((gateType === 'CNOT' || gateType === 'CZ' || gateType === 'SWAP') && this.circuitQubits < 2) {
                    this.showNotification(`‚ùå ${gateType} gate requires at least 2 qubits!`, 'error');
                    return;
                }
                
                const gateSpec = this.createGateSpecification(gateType);
                this.currentCircuit.push(gateSpec);
                
                this.updateCircuitDisplay();
                this.showNotification(`‚úÖ ${gateType} gate added to circuit!`, 'info');
                
                if (this.debugMode) {
                    this.showDebugInfo(`Added gate: ${JSON.stringify(gateSpec)}`);
                }
            }
            
            createGateSpecification(gateType) {
                const baseSpec = { type: gateType };
                
                switch(gateType) {
                    case 'CNOT':
                        return { ...baseSpec, control: 0, target: Math.min(1, this.circuitQubits - 1) };
                    case 'CZ':
                        return { ...baseSpec, control: 0, target: Math.min(1, this.circuitQubits - 1) };
                    case 'SWAP':
                        return { ...baseSpec, qubit1: 0, qubit2: Math.min(1, this.circuitQubits - 1) };
                    case 'RX':
                    case 'RY':
                    case 'RZ':
                        return { ...baseSpec, qubit: 0, angle: Math.PI / 2 };
                    default:
                        return { ...baseSpec, qubit: 0 };
                }
            }
            
            updateCircuitDisplay() {
                const display = document.getElementById('circuit-display');
                
                if (!this.circuitInitialized) {
                    display.innerHTML = `
                        <div class="circuit-status status-error">Circuit Not Initialized</div>
                        <p>Click "Initialize Circuit" to start building your quantum circuit...</p>
                    `;
                    return;
                }
                
                const complexity = this.estimateComplexity();
                const statusClass = complexity === 'High' ? 'status-error' : 
                                  complexity === 'Medium' ? 'status-building' : 'status-ready';
                
                if (this.currentCircuit.length === 0) {
                    display.innerHTML = `
                        <div class="circuit-status status-ready">‚úÖ Circuit Ready</div>
                        <p>Circuit is empty. Add gates using the buttons above to build your quantum circuit.</p>
                        <p><strong>üìä Configuration:</strong> ${this.circuitQubits} qubits | ${this.circuitShots} shots | Visualizations: ${this.includeVisualizations ? 'On' : 'Off'} | Debug: ${this.debugMode ? 'On' : 'Off'}</p>
                    `;
                } else {
                    const gateNames = this.currentCircuit.map(g => g.type);
                    display.innerHTML = `
                        <div class="circuit-status ${statusClass}">üîß Circuit Built (${complexity} Complexity)</div>
                        <p><strong>üéØ Gates:</strong> ${gateNames.join(' ‚Üí ')}</p>
                        <p><strong>üìè Circuit Length:</strong> ${this.currentCircuit.length} gates</p>
                        <p><strong>üìä Configuration:</strong> ${this.circuitQubits} qubits | ${this.circuitShots} shots | Visualizations: ${this.includeVisualizations ? 'On' : 'Off'} | Debug: ${this.debugMode ? 'On' : 'Off'}</p>
                        <div class="gate-info">${this.getGateInfo()}</div>
                    `;
                }
            }
            
            getGateInfo() {
                const gateCounts = {};
                this.currentCircuit.forEach(gate => {
                    gateCounts[gate.type] = (gateCounts[gate.type] || 0) + 1;
                });
                
                return Object.entries(gateCounts)
                    .map(([gate, count]) => `${gate}: ${count}`)
                    .join(' | ');
            }
            
            estimateComplexity() {
                if (this.currentCircuit.length > 20) return 'High';
                if (this.currentCircuit.length > 10) return 'Medium';
                
                const twoQubitGates = this.currentCircuit.filter(
                    g => ['CNOT', 'CZ', 'SWAP'].includes(g.type)
                ).length;
                
                if (twoQubitGates > 5) return 'High';
                return 'Low';
            }
            
            clearCircuit() {
                this.currentCircuit = [];
                this.updateCircuitDisplay();
                document.getElementById('circuit-results').innerHTML = '<p>üßπ Circuit cleared.</p>';
                this.clearVisualizationSections();
                this.showNotification('üßπ Circuit cleared!', 'info');
            }
            
            clearVisualizationSections() {
                document.getElementById('probability-bars').innerHTML = 
                    '<p>Run a circuit simulation to see detailed measurement statistics...</p>';
                document.getElementById('state-vector').innerHTML = 
                    '<h4>üåê Quantum State Information</h4><p>State vector information will appear here after simulation...</p>';
            }
            
            async loadPreset(preset) {
                try {
                    this.circuitInitialized = true;
                    this.enableGateButtons();
                    document.getElementById('simulate-btn').disabled = false;
                    
                    if (preset === 'bell') {
                        this.circuitQubits = 2;
                        this.currentCircuit = [
                            { type: 'H', qubit: 0 },
                            { type: 'CNOT', control: 0, target: 1 }
                        ];
                        document.getElementById('circuit-qubits').value = '2';
                        this.showNotification('üîó Bell state circuit loaded!', 'success');
                    } else if (preset === 'ghz') {
                        this.circuitQubits = 3;
                        this.currentCircuit = [
                            { type: 'H', qubit: 0 },
                            { type: 'CNOT', control: 0, target: 1 },
                            { type: 'CNOT', control: 0, target: 2 }
                        ];
                        document.getElementById('circuit-qubits').value = '3';
                        this.showNotification('üåê GHZ state circuit loaded!', 'success');
                    } else if (preset === 'superposition') {
                        this.circuitQubits = 1;
                        this.currentCircuit = [
                            { type: 'H', qubit: 0 }
                        ];
                        document.getElementById('circuit-qubits').value = '1';
                        this.showNotification('üåä Superposition state loaded!', 'success');
                    }
                    
                    this.updateCircuitDisplay();
                    await this.simulateCircuit();
                    
                } catch (error) {
                    this.showNotification('‚ùå Failed to load preset: ' + error.message, 'error');
                }
            }

            async testEndpoint() {
                try {
                    this.showNotification('üîç Testing API endpoint...', 'info');
                    
                    const testData = {
                        num_qubits: 1,
                        gates: [{ type: 'H', qubit: 0 }],
                        shots: 100
                    };

                    if (this.debugMode) {
                        this.showDebugInfo(`Testing endpoint with: ${JSON.stringify(testData, null, 2)}`);
                    }

                    const response = await fetch('/api/simulate-circuit', {
                        method: 'POST',
                        headers: { 
                            'Content-Type': 'application/json',
                            'Accept': 'application/json'
                        },
                        body: JSON.stringify(testData)
                    });

                    if (this.debugMode) {
                        this.showDebugInfo(`Response status: ${response.status} ${response.statusText}`);
                        this.showDebugInfo(`Response headers: ${JSON.stringify(Object.fromEntries(response.headers), null, 2)}`);
                    }

                    const contentType = response.headers.get('content-type');
                    if (!contentType || !contentType.includes('application/json')) {
                        const responseText = await response.text();
                        console.error('Non-JSON response:', responseText);
                        throw new Error(`Server returned ${contentType || 'unknown content type'} instead of JSON. Check server configuration.`);
                    }

                    const result = await response.json();
                    
                    if (response.ok && result.success) {
                        this.showNotification('‚úÖ API endpoint working correctly!', 'success');
                        if (this.debugMode) {
                            this.showDebugInfo(`Test successful: ${JSON.stringify(result, null, 2)}`);
                        }
                    } else {
                        throw new Error(result.error || `HTTP ${response.status}: ${response.statusText}`);
                    }

                } catch (error) {
                    console.error('Endpoint test failed:', error);
                    this.showNotification(`‚ùå API test failed: ${error.message}`, 'error');
                    if (this.debugMode) {
                        this.showDebugInfo(`Test failed: ${error.message}`);
                    }
                }
            }
            
            async simulateCircuit() {
                if (!this.circuitInitialized || this.currentCircuit.length === 0) {
                    this.showNotification('‚ö†Ô∏è Please add gates to the circuit first!', 'error');
                    return;
                }
                
                if (this.simulationInProgress) {
                    this.showNotification('‚è≥ Simulation already in progress...', 'warning');
                    return;
                }
                
                this.simulationInProgress = true;
                this.setSimulationUI(true);
                
                try {
                    const requestBody = {
                        num_qubits: this.circuitQubits,
                        gates: this.currentCircuit,
                        shots: this.circuitShots,
                        include_statevector: true,
                        include_bloch_sphere: this.includeVisualizations
                    };
                    
                    if (this.debugMode) {
                        this.showDebugInfo(`Simulation request: ${JSON.stringify(requestBody, null, 2)}`);
                    }
                    
                    const response = await fetch('/api/simulate-circuit', {
                        method: 'POST',
                        headers: { 
                            'Content-Type': 'application/json',
                            'Accept': 'application/json'
                        },
                        body: JSON.stringify(requestBody)
                    });
                    
                    if (this.debugMode) {
                        this.showDebugInfo(`Response status: ${response.status} ${response.statusText}`);
                    }
                    
                    // Check if response is JSON
                    const contentType = response.headers.get('content-type');
                    if (!contentType || !contentType.includes('application/json')) {
                        const responseText = await response.text();
                        console.error('Non-JSON response received:', responseText);
                        
                        if (this.debugMode) {
                            this.showDebugInfo(`Received non-JSON response: ${responseText.substring(0, 500)}...`);
                        }
                        
                        throw new Error('Server returned HTML instead of JSON. The API endpoint may not be properly configured.');
                    }
                    
                    const result = await response.json();
                    
                    if (this.debugMode) {
                        this.showDebugInfo(`Simulation result: ${JSON.stringify(result, null, 2)}`);
                    }
                    
                    if (response.ok && result.success) {
                        this.displayResults(result);
                        this.showNotification('üéâ Circuit simulation completed successfully!', 'success');
                    } else {
                        throw new Error(result.error || `HTTP ${response.status}: ${response.statusText}`);
                    }
                    
                } catch (error) {
                    console.error('Simulation error:', error);
                    this.displayError(error.message);
                    this.showNotification('‚ùå Simulation failed: ' + error.message, 'error');
                    
                    if (this.debugMode) {
                        this.showDebugInfo(`Simulation error: ${error.message}\nStack: ${error.stack}`);
                    }
                } finally {
                    this.simulationInProgress = false;
                    this.setSimulationUI(false);
                }
            }
            
            setSimulationUI(simulating) {
                const simulateBtn = document.getElementById('simulate-btn');
                const simulateText = document.getElementById('simulate-text');
                
                if (simulating) {
                    simulateText.innerHTML = '<span class="loading-indicator"></span> Simulating...';
                    simulateBtn.disabled = true;
                    document.getElementById('circuit-results').innerHTML = '<p>üîÑ Simulating quantum circuit...</p>';
                } else {
                    simulateText.textContent = 'Simulate Circuit';
                    simulateBtn.disabled = false;
                }
            }
            
            displayError(message) {
                document.getElementById('circuit-results').innerHTML = `
                    <div class="error-message">
                        <h4>‚ùå Simulation Error</h4>
                        <p>${message}</p>
                        <p><em>Possible solutions:</em></p>
                        <ul>
                            <li>Check that your backend server is running</li>
                            <li>Verify the /api/simulate-circuit endpoint exists</li>
                            <li>Ensure the enhanced quantum circuit simulator is properly initialized</li>
                            <li>Check server logs for detailed error information</li>
                        </ul>
                        <button class="btn-simulate" onclick="quantumApp.testEndpoint()">Test API Endpoint</button>
                    </div>
                `;
            }

            showDebugInfo(message) {
                if (!this.debugMode) return;
                
                const timestamp = new Date().toISOString();
                const debugContainer = document.getElementById('circuit-results');
                const debugDiv = document.createElement('div');
                debugDiv.className = 'debug-info';
                debugDiv.innerHTML = `<strong>[${timestamp}]</strong> ${message}`;
                debugContainer.appendChild(debugDiv);
                
                // Keep only last 5 debug messages
                const debugDivs = debugContainer.querySelectorAll('.debug-info');
                if (debugDivs.length > 5) {
                    debugDivs[0].remove();
                }
            }
            
            displayResults(result) {
                this.displayBasicResults(result);
                this.displayProbabilityBars(result);
                this.displayStateVector(result);
                this.displayVisualizations(result);
                this.updatePresetResults(result);
            }
            
            displayBasicResults(result) {
                const resultsDiv = document.getElementById('circuit-results');
                const gateNames = this.currentCircuit.map(g => g.type);
                
                let html = `
                    <div class="success-message">
                        <h4>üî¨ Circuit Simulation Results</h4>
                        <div class="results-grid">
                            <div><strong>üéØ Circuit:</strong> ${gateNames.join(' ‚Üí ')}</div>
                            <div><strong>üìä Qubits:</strong> ${this.circuitQubits}</div>
                            <div><strong>üé≤ Shots:</strong> ${this.circuitShots}</div>
                            <div><strong>üìè Depth:</strong> ${result.simulation_metadata?.circuit_depth || 'N/A'}</div>
                            <div><strong>üö™ Gates:</strong> ${result.simulation_metadata?.gate_count || 'N/A'}</div>
                            <div><strong>‚è±Ô∏è Backend:</strong> ${result.simulation_metadata?.backend || 'Qiskit'}</div>
                        </div>
                    </div>
                `;
                
                if (result.counts) {
                    const totalMeasurements = Object.values(result.counts).reduce((a, b) => a + b, 0);
                    html += `<p><strong>üìà Total Measurements:</strong> ${totalMeasurements}</p>`;
                    html += '<h5>üìä Measurement Counts:</h5>';
                    html += '<div class="counts-display">';
                    
                    Object.entries(result.counts).forEach(([state, count]) => {
                        const probability = (count / totalMeasurements * 100).toFixed(1);
                        html += `<div class="count-item">|${state}‚ü©: ${count} (${probability}%)</div>`;
                    });
                    
                    html += '</div>';
                }
                
                // Enhanced insights display
                if (result.insights && result.insights.suggestions && result.insights.suggestions.length > 0) {
                    html += '<h5>üí° Educational Insights:</h5>';
                    html += '<ul class="insights-list">';
                    result.insights.suggestions.forEach(suggestion => {
                        html += `<li>${suggestion}</li>`;
                    });
                    html += '</ul>';
                }
                
                // Circuit metrics
                if (result.metrics) {
                    html += '<h5>üìä Circuit Metrics:</h5>';
                    html += '<div class="quantum-metrics">';
                    if (result.metrics.measurement_entropy !== undefined) {
                        html += `<p><strong>Measurement Entropy:</strong> ${result.metrics.measurement_entropy.toFixed(3)} bits</p>`;
                    }
                    if (result.metrics.state_purity !== undefined) {
                        html += `<p><strong>State Purity:</strong> ${result.metrics.state_purity.toFixed(3)}</p>`;
                    }
                    html += '</div>';
                }
                
                resultsDiv.innerHTML = html;
            }
            
            displayProbabilityBars(result) {
                const probabilityBars = document.getElementById('probability-bars');
                
                if (!result.counts) {
                    probabilityBars.innerHTML = '<p>No measurement data available.</p>';
                    return;
                }
                
                const total = Object.values(result.counts).reduce((a, b) => a + b, 0);
                let html = '<h5>üìà Measurement Probabilities:</h5>';
                
                const sortedEntries = Object.entries(result.counts)
                    .sort(([,a], [,b]) => b - a);
                
                sortedEntries.forEach(([state, count]) => {
                    const probability = (count / total * 100).toFixed(1);
                    html += `
                        <div class="measurement-item">
                            <span>|${state}‚ü©: ${probability}%</span>
                            <div class="probability-bar">
                                <div class="probability-fill" style="width: ${probability}%"></div>
                            </div>
                            <span class="count-label">${count} counts</span>
                        </div>
                    `;
                });
                
                probabilityBars.innerHTML = html;
            }
            
            displayStateVector(result) {
                const stateVector = document.getElementById('state-vector');
                
                let html = '<h5>üî¢ Quantum State Vector:</h5>';
                
                if (!result.statevector) {
                    html += '<p>State vector not available for this simulation.</p>';
                } else {
                    html += '<div class="statevector-display">';
                    
                    result.statevector.forEach((amp, index) => {
                        const stateName = `|${index.toString(2).padStart(this.circuitQubits, '0')}‚ü©`;
                        const magnitude = amp.magnitude.toFixed(4);
                        const phase = (amp.phase * 180 / Math.PI).toFixed(1);
                        
                        html += `
                            <div class="amplitude-item">
                                <strong>${stateName}:</strong> 
                                ${amp.real >= 0 ? '+' : ''}${amp.real.toFixed(4)} 
                                ${amp.imag >= 0 ? '+' : ''}${amp.imag.toFixed(4)}i 
                                <span class="magnitude">(|${magnitude}|, ${phase}¬∞)</span>
                            </div>
                        `;
                    });
                    
                    html += '</div>';
                }
                
                // Add quantum metrics
                if (result.metrics) {
                    html += '<div class="quantum-metrics">';
                    if (result.metrics.state_purity !== undefined) {
                        html += `<p><strong>üéØ State Purity:</strong> ${result.metrics.state_purity.toFixed(4)}</p>`;
                    }
                    if (result.metrics.participation_ratio !== undefined) {
                        html += `<p><strong>üìä Participation Ratio:</strong> ${result.metrics.participation_ratio.toFixed(4)}</p>`;
                    }
                    if (result.metrics.entanglement_measures) {
                        const em = result.metrics.entanglement_measures;
                        if (em.entanglement_entropy !== undefined) {
                            html += `<p><strong>üîó Entanglement Entropy:</strong> ${em.entanglement_entropy.toFixed(4)}</p>`;
                        }
                    }
                    html += '</div>';
                }
                
                stateVector.innerHTML = html;
            }
            
            displayVisualizations(result) {
                if (!result.visualizations) return;
                
                const visualizations = result.visualizations;
                
                // Display various visualizations
                if (visualizations.circuit_diagram) {
                    this.addVisualization('circuit-results', 'üîß Circuit Diagram', visualizations.circuit_diagram);
                }
                
                if (visualizations.histogram) {
                    this.addVisualization('probability-bars', 'üìä Enhanced Histogram', visualizations.histogram);
                }
                
                if (visualizations.bloch_sphere) {
                    this.addVisualization('state-vector', 'üåê Bloch Sphere', visualizations.bloch_sphere);
                }
                
                if (visualizations.bloch_spheres_2q) {
                    if (visualizations.bloch_spheres_2q.qubit_0) {
                        this.addVisualization('state-vector', 'üåê Qubit 0 State', visualizations.bloch_spheres_2q.qubit_0);
                    }
                    if (visualizations.bloch_spheres_2q.qubit_1) {
                        this.addVisualization('state-vector', 'üåê Qubit 1 State', visualizations.bloch_spheres_2q.qubit_1);
                    }
                }
                
                if (visualizations.statevector_plot) {
                    this.addVisualization('state-vector', 'üìà State Vector Analysis', visualizations.statevector_plot);
                }
            }
            
            addVisualization(sectionId, title, imageData) {
                const section = document.getElementById(sectionId);
                const container = document.createElement('div');
                container.className = 'visualization-container';
                container.innerHTML = `
                    <h6>${title}</h6>
                    <img src="data:image/png;base64,${imageData}" 
                         alt="${title}" 
                         style="max-width: 100%; height: auto; border-radius: 8px; box-shadow: 0 4px 8px rgba(0,0,0,0.1);">
                `;
                section.appendChild(container);
            }
            
            updatePresetResults(result) {
                const gateNames = this.currentCircuit.map(g => g.type).join(' ‚Üí ');
                
                if (gateNames === 'H ‚Üí CNOT') {
                    document.getElementById('bell-results').innerHTML = `
                        <div class="success-message">
                            <p><strong>üîó Bell State Measurement Results:</strong></p>
                            <p><strong>Expected:</strong> ~50% |00‚ü©, ~50% |11‚ü© (perfect correlation)</p>
                            <p><strong>Actual:</strong> ${JSON.stringify(result.counts)}</p>
                            <p><em>Perfect Bell state shows only |00‚ü© and |11‚ü© outcomes - demonstrating quantum entanglement!</em></p>
                        </div>
                    `;
                } else if (gateNames === 'H ‚Üí CNOT ‚Üí CNOT') {
                    document.getElementById('ghz-results').innerHTML = `
                        <div class="success-message">
                            <p><strong>üåê GHZ State Measurement Results:</strong></p>
                            <p><strong>Expected:</strong> ~50% |000‚ü©, ~50% |111‚ü©</p>
                            <p><strong>Actual:</strong> ${JSON.stringify(result.counts)}</p>
                            <p><em>GHZ state demonstrates three-qubit entanglement - all qubits are correlated!</em></p>
                        </div>
                    `;
                }
            }
            
            showNotification(message, type = 'info') {
                // Remove existing notifications
                document.querySelectorAll('.notification').forEach(n => n.remove());
                
                const notification = document.createElement('div');
                notification.className = `notification notification-${type}`;
                notification.textContent = message;
                
                Object.assign(notification.style, {
                    position: 'fixed',
                    top: '20px',
                    right: '20px',
                    padding: '15px 20px',
                    borderRadius: '12px',
                    color: 'white',
                    fontWeight: '600',
                    zIndex: '1000',
                    transform: 'translateX(100%)',
                    transition: 'transform 0.3s ease',
                    maxWidth: '350px',
                    wordWrap: 'break-word',
                    boxShadow: '0 8px 25px rgba(0,0,0,0.3)',
                    backdropFilter: 'blur(10px)'
                });
                
                const colors = {
                    'success': 'linear-gradient(135deg, #4CAF50, #8BC34A)',
                    'error': 'linear-gradient(135deg, #F44336, #E91E63)',
                    'warning': 'linear-gradient(135deg, #FF9800, #FF5722)',
                    'info': 'linear-gradient(135deg, #2196F3, #21CBF3)'
                };
                notification.style.background = colors[type] || colors.info;
                
                document.body.appendChild(notification);
                
                setTimeout(() => notification.style.transform = 'translateX(0)', 100);
                setTimeout(() => {
                    notification.style.transform = 'translateX(100%)';
                    setTimeout(() => notification.remove(), 300);
                }, 4000);
            }
        }

        // Initialize the application
        const quantumApp = new QuantumCircuitApp();

        // Global functions for HTML onclick events
        function initializeCircuit() { quantumApp.initializeCircuit(); }
        function addGate(gateType) { quantumApp.addGate(gateType); }
        function simulateCircuit() { quantumApp.simulateCircuit(); }
        function clearCircuit() { quantumApp.clearCircuit(); }
        function loadPreset(preset) { quantumApp.loadPreset(preset); }
        function testEndpoint() { quantumApp.testEndpoint(); }

        // Initialize display on page load
        document.addEventListener('DOMContentLoaded', function() {
            quantumApp.updateCircuitDisplay();
            console.log('Quantum Circuits tutorial loaded');
        });
    </script>
</body>
</html>